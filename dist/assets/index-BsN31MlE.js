import*as X from"three";import{Ray as fe,Plane as de,MathUtils as pe,Vector3 as st,Controls as me,MOUSE as Tt,TOUCH as Ct,Quaternion as Jt,Spherical as $t,Vector2 as D,OrthographicCamera as ge,Mesh as ye,BufferGeometry as oe,Float32BufferAttribute as vt,ShaderMaterial as wt,UniformsUtils as Gt,WebGLRenderTarget as Ot,HalfFloatType as Nt,NoBlending as be,Clock as xe,Color as jt,AdditiveBlending as _e,MeshBasicMaterial as Ce,Loader as we,FileLoader as Te,Matrix3 as _t,ShapeUtils as Me,Box2 as Se,Shape as Pe,Path as Vt,ShapePath as xt,SRGBColorSpace as ve}from"three";import{GUI as Ee}from"dat.gui";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const l of h)if(l.type==="childList")for(const _ of l.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&u(_)}).observe(document,{childList:!0,subtree:!0});function a(h){const l={};return h.integrity&&(l.integrity=h.integrity),h.referrerPolicy&&(l.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?l.credentials="include":h.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(h){if(h.ep)return;h.ep=!0;const l=a(h);fetch(h.href,l)}})();const te={type:"change"},Yt={type:"start"},ne={type:"end"},It=new fe,ee=new de,Ae=Math.cos(70*pe.DEG2RAD),et=new st,lt=2*Math.PI,G={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Wt=1e-6;class De extends me{constructor(t,a=null){super(t,a),this.state=G.NONE,this.enabled=!0,this.target=new st,this.cursor=new st,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Tt.ROTATE,MIDDLE:Tt.DOLLY,RIGHT:Tt.PAN},this.touches={ONE:Ct.ROTATE,TWO:Ct.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new st,this._lastQuaternion=new Jt,this._lastTargetPosition=new st,this._quat=new Jt().setFromUnitVectors(t.up,new st(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new $t,this._sphericalDelta=new $t,this._scale=1,this._panOffset=new st,this._rotateStart=new D,this._rotateEnd=new D,this._rotateDelta=new D,this._panStart=new D,this._panEnd=new D,this._panDelta=new D,this._dollyStart=new D,this._dollyEnd=new D,this._dollyDelta=new D,this._dollyDirection=new st,this._mouse=new D,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ke.bind(this),this._onPointerDown=Re.bind(this),this._onPointerUp=Le.bind(this),this._onContextMenu=Be.bind(this),this._onMouseWheel=Ne.bind(this),this._onKeyDown=je.bind(this),this._onTouchStart=Ue.bind(this),this._onTouchMove=ze.bind(this),this._onMouseDown=Ie.bind(this),this._onMouseMove=Oe.bind(this),this._interceptControlDown=He.bind(this),this._interceptControlUp=Fe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(te),this.update(),this.state=G.NONE}update(t=null){const a=this.object.position;et.copy(a).sub(this.target),et.applyQuaternion(this._quat),this._spherical.setFromVector3(et),this.autoRotate&&this.state===G.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let u=this.minAzimuthAngle,h=this.maxAzimuthAngle;isFinite(u)&&isFinite(h)&&(u<-Math.PI?u+=lt:u>Math.PI&&(u-=lt),h<-Math.PI?h+=lt:h>Math.PI&&(h-=lt),u<=h?this._spherical.theta=Math.max(u,Math.min(h,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(u+h)/2?Math.max(u,this._spherical.theta):Math.min(h,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let l=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const _=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),l=_!=this._spherical.radius}if(et.setFromSpherical(this._spherical),et.applyQuaternion(this._quatInverse),a.copy(this.target).add(et),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let _=null;if(this.object.isPerspectiveCamera){const L=et.length();_=this._clampDistance(L*this._scale);const N=L-_;this.object.position.addScaledVector(this._dollyDirection,N),this.object.updateMatrixWorld(),l=!!N}else if(this.object.isOrthographicCamera){const L=new st(this._mouse.x,this._mouse.y,0);L.unproject(this.object);const N=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),l=N!==this.object.zoom;const Z=new st(this._mouse.x,this._mouse.y,0);Z.unproject(this.object),this.object.position.sub(Z).add(L),this.object.updateMatrixWorld(),_=et.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;_!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(_).add(this.object.position):(It.origin.copy(this.object.position),It.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(It.direction))<Ae?this.object.lookAt(this.target):(ee.setFromNormalAndCoplanarPoint(this.object.up,this.target),It.intersectPlane(ee,this.target))))}else if(this.object.isOrthographicCamera){const _=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),_!==this.object.zoom&&(this.object.updateProjectionMatrix(),l=!0)}return this._scale=1,this._performCursorZoom=!1,l||this._lastPosition.distanceToSquared(this.object.position)>Wt||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Wt||this._lastTargetPosition.distanceToSquared(this.target)>Wt?(this.dispatchEvent(te),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?lt/60*this.autoRotateSpeed*t:lt/60/60*this.autoRotateSpeed}_getZoomScale(t){const a=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*a)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,a){et.setFromMatrixColumn(a,0),et.multiplyScalar(-t),this._panOffset.add(et)}_panUp(t,a){this.screenSpacePanning===!0?et.setFromMatrixColumn(a,1):(et.setFromMatrixColumn(a,0),et.crossVectors(this.object.up,et)),et.multiplyScalar(t),this._panOffset.add(et)}_pan(t,a){const u=this.domElement;if(this.object.isPerspectiveCamera){const h=this.object.position;et.copy(h).sub(this.target);let l=et.length();l*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*l/u.clientHeight,this.object.matrix),this._panUp(2*a*l/u.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/u.clientWidth,this.object.matrix),this._panUp(a*(this.object.top-this.object.bottom)/this.object.zoom/u.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,a){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const u=this.domElement.getBoundingClientRect(),h=t-u.left,l=a-u.top,_=u.width,L=u.height;this._mouse.x=h/_*2-1,this._mouse.y=-(l/L)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const a=this.domElement;this._rotateLeft(lt*this._rotateDelta.x/a.clientHeight),this._rotateUp(lt*this._rotateDelta.y/a.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let a=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateUp(lt*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),a=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateUp(-lt*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),a=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateLeft(lt*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),a=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this._rotateLeft(-lt*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),a=!0;break}a&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const a=this._getSecondPointerPosition(t),u=.5*(t.pageX+a.x),h=.5*(t.pageY+a.y);this._rotateStart.set(u,h)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const a=this._getSecondPointerPosition(t),u=.5*(t.pageX+a.x),h=.5*(t.pageY+a.y);this._panStart.set(u,h)}}_handleTouchStartDolly(t){const a=this._getSecondPointerPosition(t),u=t.pageX-a.x,h=t.pageY-a.y,l=Math.sqrt(u*u+h*h);this._dollyStart.set(0,l)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const u=this._getSecondPointerPosition(t),h=.5*(t.pageX+u.x),l=.5*(t.pageY+u.y);this._rotateEnd.set(h,l)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const a=this.domElement;this._rotateLeft(lt*this._rotateDelta.x/a.clientHeight),this._rotateUp(lt*this._rotateDelta.y/a.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const a=this._getSecondPointerPosition(t),u=.5*(t.pageX+a.x),h=.5*(t.pageY+a.y);this._panEnd.set(u,h)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const a=this._getSecondPointerPosition(t),u=t.pageX-a.x,h=t.pageY-a.y,l=Math.sqrt(u*u+h*h);this._dollyEnd.set(0,l),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const _=(t.pageX+a.x)*.5,L=(t.pageY+a.y)*.5;this._updateZoomParameters(_,L)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let a=0;a<this._pointers.length;a++)if(this._pointers[a]==t.pointerId){this._pointers.splice(a,1);return}}_isTrackingPointer(t){for(let a=0;a<this._pointers.length;a++)if(this._pointers[a]==t.pointerId)return!0;return!1}_trackPointer(t){let a=this._pointerPositions[t.pointerId];a===void 0&&(a=new D,this._pointerPositions[t.pointerId]=a),a.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const a=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[a]}_customWheelEvent(t){const a=t.deltaMode,u={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(a){case 1:u.deltaY*=16;break;case 2:u.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(u.deltaY*=10),u}}function Re(p){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(p.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(p)&&(this._addPointer(p),p.pointerType==="touch"?this._onTouchStart(p):this._onMouseDown(p)))}function ke(p){this.enabled!==!1&&(p.pointerType==="touch"?this._onTouchMove(p):this._onMouseMove(p))}function Le(p){switch(this._removePointer(p),this._pointers.length){case 0:this.domElement.releasePointerCapture(p.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(ne),this.state=G.NONE;break;case 1:const t=this._pointers[0],a=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:a.x,pageY:a.y});break}}function Ie(p){let t;switch(p.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Tt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(p),this.state=G.DOLLY;break;case Tt.ROTATE:if(p.ctrlKey||p.metaKey||p.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(p),this.state=G.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(p),this.state=G.ROTATE}break;case Tt.PAN:if(p.ctrlKey||p.metaKey||p.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(p),this.state=G.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(p),this.state=G.PAN}break;default:this.state=G.NONE}this.state!==G.NONE&&this.dispatchEvent(Yt)}function Oe(p){switch(this.state){case G.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(p);break;case G.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(p);break;case G.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(p);break}}function Ne(p){this.enabled===!1||this.enableZoom===!1||this.state!==G.NONE||(p.preventDefault(),this.dispatchEvent(Yt),this._handleMouseWheel(this._customWheelEvent(p)),this.dispatchEvent(ne))}function je(p){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(p)}function Ue(p){switch(this._trackPointer(p),this._pointers.length){case 1:switch(this.touches.ONE){case Ct.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(p),this.state=G.TOUCH_ROTATE;break;case Ct.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(p),this.state=G.TOUCH_PAN;break;default:this.state=G.NONE}break;case 2:switch(this.touches.TWO){case Ct.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(p),this.state=G.TOUCH_DOLLY_PAN;break;case Ct.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(p),this.state=G.TOUCH_DOLLY_ROTATE;break;default:this.state=G.NONE}break;default:this.state=G.NONE}this.state!==G.NONE&&this.dispatchEvent(Yt)}function ze(p){switch(this._trackPointer(p),this.state){case G.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(p),this.update();break;case G.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(p),this.update();break;case G.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(p),this.update();break;case G.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(p),this.update();break;default:this.state=G.NONE}}function Be(p){this.enabled!==!1&&p.preventDefault()}function He(p){p.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Fe(p){p.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const ae={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class At{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Ve=new ge(-1,1,1,-1,0,1);class We extends oe{constructor(){super(),this.setAttribute("position",new vt([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new vt([0,2,0,0,2,0],2))}}const Ge=new We;class re{constructor(t){this._mesh=new ye(Ge,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,Ve)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class qt extends At{constructor(t,a){super(),this.textureID=a!==void 0?a:"tDiffuse",t instanceof wt?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=Gt.clone(t.uniforms),this.material=new wt({name:t.name!==void 0?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new re(this.material)}render(t,a,u){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=u.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(a),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class se extends At{constructor(t,a){super(),this.scene=t,this.camera=a,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,a,u){const h=t.getContext(),l=t.state;l.buffers.color.setMask(!1),l.buffers.depth.setMask(!1),l.buffers.color.setLocked(!0),l.buffers.depth.setLocked(!0);let _,L;this.inverse?(_=0,L=1):(_=1,L=0),l.buffers.stencil.setTest(!0),l.buffers.stencil.setOp(h.REPLACE,h.REPLACE,h.REPLACE),l.buffers.stencil.setFunc(h.ALWAYS,_,4294967295),l.buffers.stencil.setClear(L),l.buffers.stencil.setLocked(!0),t.setRenderTarget(u),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(a),this.clear&&t.clear(),t.render(this.scene,this.camera),l.buffers.color.setLocked(!1),l.buffers.depth.setLocked(!1),l.buffers.color.setMask(!0),l.buffers.depth.setMask(!0),l.buffers.stencil.setLocked(!1),l.buffers.stencil.setFunc(h.EQUAL,1,4294967295),l.buffers.stencil.setOp(h.KEEP,h.KEEP,h.KEEP),l.buffers.stencil.setLocked(!0)}}class Ye extends At{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class qe{constructor(t,a){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),a===void 0){const u=t.getSize(new D);this._width=u.width,this._height=u.height,a=new Ot(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Nt}),a.texture.name="EffectComposer.rt1"}else this._width=a.width,this._height=a.height;this.renderTarget1=a,this.renderTarget2=a.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new qt(ae),this.copyPass.material.blending=be,this.clock=new xe}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,a){this.passes.splice(a,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const a=this.passes.indexOf(t);a!==-1&&this.passes.splice(a,1)}isLastEnabledPass(t){for(let a=t+1;a<this.passes.length;a++)if(this.passes[a].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const a=this.renderer.getRenderTarget();let u=!1;for(let h=0,l=this.passes.length;h<l;h++){const _=this.passes[h];if(_.enabled!==!1){if(_.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(h),_.render(this.renderer,this.writeBuffer,this.readBuffer,t,u),_.needsSwap){if(u){const L=this.renderer.getContext(),N=this.renderer.state.buffers.stencil;N.setFunc(L.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),N.setFunc(L.EQUAL,1,4294967295)}this.swapBuffers()}se!==void 0&&(_ instanceof se?u=!0:_ instanceof Ye&&(u=!1))}}this.renderer.setRenderTarget(a)}reset(t){if(t===void 0){const a=this.renderer.getSize(new D);this._pixelRatio=this.renderer.getPixelRatio(),this._width=a.width,this._height=a.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,a){this._width=t,this._height=a;const u=this._width*this._pixelRatio,h=this._height*this._pixelRatio;this.renderTarget1.setSize(u,h),this.renderTarget2.setSize(u,h);for(let l=0;l<this.passes.length;l++)this.passes[l].setSize(u,h)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Ze extends At{constructor(t,a,u=null,h=null,l=null){super(),this.scene=t,this.camera=a,this.overrideMaterial=u,this.clearColor=h,this.clearAlpha=l,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new jt}render(t,a,u){const h=t.autoClear;t.autoClear=!1;let l,_;this.overrideMaterial!==null&&(_=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor,t.getClearAlpha())),this.clearAlpha!==null&&(l=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:u),this.clear===!0&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor!==null&&t.setClearColor(this._oldClearColor),this.clearAlpha!==null&&t.setClearAlpha(l),this.overrideMaterial!==null&&(this.scene.overrideMaterial=_),t.autoClear=h}}const Ke={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new jt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Mt extends At{constructor(t,a,u,h){super(),this.strength=a!==void 0?a:1,this.radius=u,this.threshold=h,this.resolution=t!==void 0?new D(t.x,t.y):new D(256,256),this.clearColor=new jt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let l=Math.round(this.resolution.x/2),_=Math.round(this.resolution.y/2);this.renderTargetBright=new Ot(l,_,{type:Nt}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let I=0;I<this.nMips;I++){const B=new Ot(l,_,{type:Nt});B.texture.name="UnrealBloomPass.h"+I,B.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(B);const ht=new Ot(l,_,{type:Nt});ht.texture.name="UnrealBloomPass.v"+I,ht.texture.generateMipmaps=!1,this.renderTargetsVertical.push(ht),l=Math.round(l/2),_=Math.round(_/2)}const L=Ke;this.highPassUniforms=Gt.clone(L.uniforms),this.highPassUniforms.luminosityThreshold.value=h,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new wt({uniforms:this.highPassUniforms,vertexShader:L.vertexShader,fragmentShader:L.fragmentShader}),this.separableBlurMaterials=[];const N=[3,5,7,9,11];l=Math.round(this.resolution.x/2),_=Math.round(this.resolution.y/2);for(let I=0;I<this.nMips;I++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(N[I])),this.separableBlurMaterials[I].uniforms.invSize.value=new D(1/l,1/_),l=Math.round(l/2),_=Math.round(_/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=a,this.compositeMaterial.uniforms.bloomRadius.value=.1;const Z=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=Z,this.bloomTintColors=[new st(1,1,1),new st(1,1,1),new st(1,1,1),new st(1,1,1),new st(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const $=ae;this.copyUniforms=Gt.clone($.uniforms),this.blendMaterial=new wt({uniforms:this.copyUniforms,vertexShader:$.vertexShader,fragmentShader:$.fragmentShader,blending:_e,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new jt,this.oldClearAlpha=1,this.basic=new Ce,this.fsQuad=new re(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,a){let u=Math.round(t/2),h=Math.round(a/2);this.renderTargetBright.setSize(u,h);for(let l=0;l<this.nMips;l++)this.renderTargetsHorizontal[l].setSize(u,h),this.renderTargetsVertical[l].setSize(u,h),this.separableBlurMaterials[l].uniforms.invSize.value=new D(1/u,1/h),u=Math.round(u/2),h=Math.round(h/2)}render(t,a,u,h,l){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const _=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),l&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=u.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=u.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let L=this.renderTargetBright;for(let N=0;N<this.nMips;N++)this.fsQuad.material=this.separableBlurMaterials[N],this.separableBlurMaterials[N].uniforms.colorTexture.value=L.texture,this.separableBlurMaterials[N].uniforms.direction.value=Mt.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[N]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[N].uniforms.colorTexture.value=this.renderTargetsHorizontal[N].texture,this.separableBlurMaterials[N].uniforms.direction.value=Mt.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[N]),t.clear(),this.fsQuad.render(t),L=this.renderTargetsVertical[N];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,l&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(u),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=_}getSeperableBlurMaterial(t){const a=[];for(let u=0;u<t;u++)a.push(.39894*Math.exp(-.5*u*u/(t*t))/t);return new wt({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new D(.5,.5)},direction:{value:new D(.5,.5)},gaussianCoefficients:{value:a}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(t){return new wt({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Mt.BlurDirectionX=new D(1,0);Mt.BlurDirectionY=new D(0,1);const Xe=ve;class Zt extends we{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,a,u,h){const l=this,_=new Te(l.manager);_.setPath(l.path),_.setRequestHeader(l.requestHeader),_.setWithCredentials(l.withCredentials),_.load(t,function(L){try{a(l.parse(L))}catch(N){h?h(N):console.error(N),l.manager.itemError(t)}},u,h)}parse(t){const a=this;function u(r,o){if(r.nodeType!==1)return;const s=E(r);let e=!1,f=null;switch(r.nodeName){case"svg":o=K(r,o);break;case"style":l(r);break;case"g":o=K(r,o);break;case"path":o=K(r,o),r.hasAttribute("d")&&(f=h(r));break;case"rect":o=K(r,o),f=N(r);break;case"polygon":o=K(r,o),f=Z(r);break;case"polyline":o=K(r,o),f=$(r);break;case"circle":o=K(r,o),f=I(r);break;case"ellipse":o=K(r,o),f=B(r);break;case"line":o=K(r,o),f=ht(r);break;case"defs":e=!0;break;case"use":o=K(r,o);const x=(r.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),w=r.viewportElement.getElementById(x);w?u(w,o):console.warn("SVGLoader: 'use node' references non-existent node id: "+x);break}f&&(o.fill!==void 0&&o.fill!=="none"&&f.color.setStyle(o.fill,Xe),j(f,ut),A.push(f),f.userData={node:r,style:o});const y=r.childNodes;for(let c=0;c<y.length;c++){const x=y[c];e&&x.nodeName!=="style"&&x.nodeName!=="defs"||u(x,o)}s&&(q.pop(),q.length>0?ut.copy(q[q.length-1]):ut.identity())}function h(r){const o=new xt,s=new D,e=new D,f=new D;let y=!0,c=!1;const x=r.getAttribute("d");if(x===""||x==="none")return null;const w=x.match(/[a-df-z][^a-df-z]*/ig);for(let T=0,d=w.length;T<d;T++){const m=w[T],M=m.charAt(0),P=m.slice(1).trim();y===!0&&(c=!0,y=!1);let n;switch(M){case"M":n=C(P);for(let i=0,v=n.length;i<v;i+=2)s.x=n[i+0],s.y=n[i+1],e.x=s.x,e.y=s.y,i===0?o.moveTo(s.x,s.y):o.lineTo(s.x,s.y),i===0&&f.copy(s);break;case"H":n=C(P);for(let i=0,v=n.length;i<v;i++)s.x=n[i],e.x=s.x,e.y=s.y,o.lineTo(s.x,s.y),i===0&&c===!0&&f.copy(s);break;case"V":n=C(P);for(let i=0,v=n.length;i<v;i++)s.y=n[i],e.x=s.x,e.y=s.y,o.lineTo(s.x,s.y),i===0&&c===!0&&f.copy(s);break;case"L":n=C(P);for(let i=0,v=n.length;i<v;i+=2)s.x=n[i+0],s.y=n[i+1],e.x=s.x,e.y=s.y,o.lineTo(s.x,s.y),i===0&&c===!0&&f.copy(s);break;case"C":n=C(P);for(let i=0,v=n.length;i<v;i+=6)o.bezierCurveTo(n[i+0],n[i+1],n[i+2],n[i+3],n[i+4],n[i+5]),e.x=n[i+2],e.y=n[i+3],s.x=n[i+4],s.y=n[i+5],i===0&&c===!0&&f.copy(s);break;case"S":n=C(P);for(let i=0,v=n.length;i<v;i+=4)o.bezierCurveTo(S(s.x,e.x),S(s.y,e.y),n[i+0],n[i+1],n[i+2],n[i+3]),e.x=n[i+0],e.y=n[i+1],s.x=n[i+2],s.y=n[i+3],i===0&&c===!0&&f.copy(s);break;case"Q":n=C(P);for(let i=0,v=n.length;i<v;i+=4)o.quadraticCurveTo(n[i+0],n[i+1],n[i+2],n[i+3]),e.x=n[i+0],e.y=n[i+1],s.x=n[i+2],s.y=n[i+3],i===0&&c===!0&&f.copy(s);break;case"T":n=C(P);for(let i=0,v=n.length;i<v;i+=2){const W=S(s.x,e.x),ct=S(s.y,e.y);o.quadraticCurveTo(W,ct,n[i+0],n[i+1]),e.x=W,e.y=ct,s.x=n[i+0],s.y=n[i+1],i===0&&c===!0&&f.copy(s)}break;case"A":n=C(P,[3,4],7);for(let i=0,v=n.length;i<v;i+=7){if(n[i+5]==s.x&&n[i+6]==s.y)continue;const W=s.clone();s.x=n[i+5],s.y=n[i+6],e.x=s.x,e.y=s.y,_(o,n[i],n[i+1],n[i+2],n[i+3],n[i+4],W,s),i===0&&c===!0&&f.copy(s)}break;case"m":n=C(P);for(let i=0,v=n.length;i<v;i+=2)s.x+=n[i+0],s.y+=n[i+1],e.x=s.x,e.y=s.y,i===0?o.moveTo(s.x,s.y):o.lineTo(s.x,s.y),i===0&&f.copy(s);break;case"h":n=C(P);for(let i=0,v=n.length;i<v;i++)s.x+=n[i],e.x=s.x,e.y=s.y,o.lineTo(s.x,s.y),i===0&&c===!0&&f.copy(s);break;case"v":n=C(P);for(let i=0,v=n.length;i<v;i++)s.y+=n[i],e.x=s.x,e.y=s.y,o.lineTo(s.x,s.y),i===0&&c===!0&&f.copy(s);break;case"l":n=C(P);for(let i=0,v=n.length;i<v;i+=2)s.x+=n[i+0],s.y+=n[i+1],e.x=s.x,e.y=s.y,o.lineTo(s.x,s.y),i===0&&c===!0&&f.copy(s);break;case"c":n=C(P);for(let i=0,v=n.length;i<v;i+=6)o.bezierCurveTo(s.x+n[i+0],s.y+n[i+1],s.x+n[i+2],s.y+n[i+3],s.x+n[i+4],s.y+n[i+5]),e.x=s.x+n[i+2],e.y=s.y+n[i+3],s.x+=n[i+4],s.y+=n[i+5],i===0&&c===!0&&f.copy(s);break;case"s":n=C(P);for(let i=0,v=n.length;i<v;i+=4)o.bezierCurveTo(S(s.x,e.x),S(s.y,e.y),s.x+n[i+0],s.y+n[i+1],s.x+n[i+2],s.y+n[i+3]),e.x=s.x+n[i+0],e.y=s.y+n[i+1],s.x+=n[i+2],s.y+=n[i+3],i===0&&c===!0&&f.copy(s);break;case"q":n=C(P);for(let i=0,v=n.length;i<v;i+=4)o.quadraticCurveTo(s.x+n[i+0],s.y+n[i+1],s.x+n[i+2],s.y+n[i+3]),e.x=s.x+n[i+0],e.y=s.y+n[i+1],s.x+=n[i+2],s.y+=n[i+3],i===0&&c===!0&&f.copy(s);break;case"t":n=C(P);for(let i=0,v=n.length;i<v;i+=2){const W=S(s.x,e.x),ct=S(s.y,e.y);o.quadraticCurveTo(W,ct,s.x+n[i+0],s.y+n[i+1]),e.x=W,e.y=ct,s.x=s.x+n[i+0],s.y=s.y+n[i+1],i===0&&c===!0&&f.copy(s)}break;case"a":n=C(P,[3,4],7);for(let i=0,v=n.length;i<v;i+=7){if(n[i+5]==0&&n[i+6]==0)continue;const W=s.clone();s.x+=n[i+5],s.y+=n[i+6],e.x=s.x,e.y=s.y,_(o,n[i],n[i+1],n[i+2],n[i+3],n[i+4],W,s),i===0&&c===!0&&f.copy(s)}break;case"Z":case"z":o.currentPath.autoClose=!0,o.currentPath.curves.length>0&&(s.copy(f),o.currentPath.currentPoint.copy(s),y=!0);break;default:console.warn(m)}c=!1}return o}function l(r){if(!(!r.sheet||!r.sheet.cssRules||!r.sheet.cssRules.length))for(let o=0;o<r.sheet.cssRules.length;o++){const s=r.sheet.cssRules[o];if(s.type!==1)continue;const e=s.selectorText.split(/,/gm).filter(Boolean).map(f=>f.trim());for(let f=0;f<e.length;f++){const y=Object.fromEntries(Object.entries(s.style).filter(([,c])=>c!==""));Q[e[f]]=Object.assign(Q[e[f]]||{},y)}}}function _(r,o,s,e,f,y,c,x){if(o==0||s==0){r.lineTo(x.x,x.y);return}e=e*Math.PI/180,o=Math.abs(o),s=Math.abs(s);const w=(c.x-x.x)/2,T=(c.y-x.y)/2,d=Math.cos(e)*w+Math.sin(e)*T,m=-Math.sin(e)*w+Math.cos(e)*T;let M=o*o,P=s*s;const n=d*d,i=m*m,v=n/M+i/P;if(v>1){const Lt=Math.sqrt(v);o=Lt*o,s=Lt*s,M=o*o,P=s*s}const W=M*i+P*n,ct=(M*P-W)/W;let dt=Math.sqrt(Math.max(0,ct));f===y&&(dt=-dt);const nt=dt*o*m/s,yt=-dt*s*d/o,Rt=Math.cos(e)*nt-Math.sin(e)*yt+(c.x+x.x)/2,Kt=Math.sin(e)*nt+Math.cos(e)*yt+(c.y+x.y)/2,kt=L(1,0,(d-nt)/o,(m-yt)/s),Ft=L((d-nt)/o,(m-yt)/s,(-d-nt)/o,(-m-yt)/s)%(Math.PI*2);r.currentPath.absellipse(Rt,Kt,o,s,kt,kt+Ft,y===0,e)}function L(r,o,s,e){const f=r*s+o*e,y=Math.sqrt(r*r+o*o)*Math.sqrt(s*s+e*e);let c=Math.acos(Math.max(-1,Math.min(1,f/y)));return r*e-o*s<0&&(c=-c),c}function N(r){const o=b(r.getAttribute("x")||0),s=b(r.getAttribute("y")||0),e=b(r.getAttribute("rx")||r.getAttribute("ry")||0),f=b(r.getAttribute("ry")||r.getAttribute("rx")||0),y=b(r.getAttribute("width")),c=b(r.getAttribute("height")),x=1-.551915024494,w=new xt;return w.moveTo(o+e,s),w.lineTo(o+y-e,s),(e!==0||f!==0)&&w.bezierCurveTo(o+y-e*x,s,o+y,s+f*x,o+y,s+f),w.lineTo(o+y,s+c-f),(e!==0||f!==0)&&w.bezierCurveTo(o+y,s+c-f*x,o+y-e*x,s+c,o+y-e,s+c),w.lineTo(o+e,s+c),(e!==0||f!==0)&&w.bezierCurveTo(o+e*x,s+c,o,s+c-f*x,o,s+c-f),w.lineTo(o,s+f),(e!==0||f!==0)&&w.bezierCurveTo(o,s+f*x,o+e*x,s,o+e,s),w}function Z(r){function o(y,c,x){const w=b(c),T=b(x);f===0?e.moveTo(w,T):e.lineTo(w,T),f++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,e=new xt;let f=0;return r.getAttribute("points").replace(s,o),e.currentPath.autoClose=!0,e}function $(r){function o(y,c,x){const w=b(c),T=b(x);f===0?e.moveTo(w,T):e.lineTo(w,T),f++}const s=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,e=new xt;let f=0;return r.getAttribute("points").replace(s,o),e.currentPath.autoClose=!1,e}function I(r){const o=b(r.getAttribute("cx")||0),s=b(r.getAttribute("cy")||0),e=b(r.getAttribute("r")||0),f=new Vt;f.absarc(o,s,e,0,Math.PI*2);const y=new xt;return y.subPaths.push(f),y}function B(r){const o=b(r.getAttribute("cx")||0),s=b(r.getAttribute("cy")||0),e=b(r.getAttribute("rx")||0),f=b(r.getAttribute("ry")||0),y=new Vt;y.absellipse(o,s,e,f,0,Math.PI*2);const c=new xt;return c.subPaths.push(y),c}function ht(r){const o=b(r.getAttribute("x1")||0),s=b(r.getAttribute("y1")||0),e=b(r.getAttribute("x2")||0),f=b(r.getAttribute("y2")||0),y=new xt;return y.moveTo(o,s),y.lineTo(e,f),y.currentPath.autoClose=!1,y}function K(r,o){o=Object.assign({},o);let s={};if(r.hasAttribute("class")){const c=r.getAttribute("class").split(/\s/).filter(Boolean).map(x=>x.trim());for(let x=0;x<c.length;x++)s=Object.assign(s,Q["."+c[x]])}r.hasAttribute("id")&&(s=Object.assign(s,Q["#"+r.getAttribute("id")]));function e(c,x,w){w===void 0&&(w=function(d){return d.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),d}),r.hasAttribute(c)&&(o[x]=w(r.getAttribute(c))),s[c]&&(o[x]=w(s[c])),r.style&&r.style[c]!==""&&(o[x]=w(r.style[c]))}function f(c){return Math.max(0,Math.min(1,b(c)))}function y(c){return Math.max(0,b(c))}return e("fill","fill"),e("fill-opacity","fillOpacity",f),e("fill-rule","fillRule"),e("opacity","opacity",f),e("stroke","stroke"),e("stroke-opacity","strokeOpacity",f),e("stroke-width","strokeWidth",y),e("stroke-linejoin","strokeLineJoin"),e("stroke-linecap","strokeLineCap"),e("stroke-miterlimit","strokeMiterLimit",y),e("visibility","visibility"),o}function S(r,o){return r-(o-r)}function C(r,o,s){if(typeof r!="string")throw new TypeError("Invalid input: "+typeof r);const e={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},f=0,y=1,c=2,x=3;let w=f,T=!0,d="",m="";const M=[];function P(W,ct,dt){const nt=new SyntaxError('Unexpected character "'+W+'" at index '+ct+".");throw nt.partial=dt,nt}function n(){d!==""&&(m===""?M.push(Number(d)):M.push(Number(d)*Math.pow(10,Number(m)))),d="",m=""}let i;const v=r.length;for(let W=0;W<v;W++){if(i=r[W],Array.isArray(o)&&o.includes(M.length%s)&&e.FLAGS.test(i)){w=y,d=i,n();continue}if(w===f){if(e.WHITESPACE.test(i))continue;if(e.DIGIT.test(i)||e.SIGN.test(i)){w=y,d=i;continue}if(e.POINT.test(i)){w=c,d=i;continue}e.COMMA.test(i)&&(T&&P(i,W,M),T=!0)}if(w===y){if(e.DIGIT.test(i)){d+=i;continue}if(e.POINT.test(i)){d+=i,w=c;continue}if(e.EXP.test(i)){w=x;continue}e.SIGN.test(i)&&d.length===1&&e.SIGN.test(d[0])&&P(i,W,M)}if(w===c){if(e.DIGIT.test(i)){d+=i;continue}if(e.EXP.test(i)){w=x;continue}e.POINT.test(i)&&d[d.length-1]==="."&&P(i,W,M)}if(w===x){if(e.DIGIT.test(i)){m+=i;continue}if(e.SIGN.test(i)){if(m===""){m+=i;continue}m.length===1&&e.SIGN.test(m)&&P(i,W,M)}}e.WHITESPACE.test(i)?(n(),w=f,T=!1):e.COMMA.test(i)?(n(),w=f,T=!0):e.SIGN.test(i)?(n(),w=y,d=i):e.POINT.test(i)?(n(),w=c,d=i):P(i,W,M)}return n(),M}const R=["mm","cm","in","pt","pc","px"],F={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function b(r){let o="px";if(typeof r=="string"||r instanceof String)for(let e=0,f=R.length;e<f;e++){const y=R[e];if(r.endsWith(y)){o=y,r=r.substring(0,r.length-y.length);break}}let s;return o==="px"&&a.defaultUnit!=="px"?s=F.in[a.defaultUnit]/a.defaultDPI:(s=F[o][a.defaultUnit],s<0&&(s=F[o].in*a.defaultDPI)),s*parseFloat(r)}function E(r){if(!(r.hasAttribute("transform")||r.nodeName==="use"&&(r.hasAttribute("x")||r.hasAttribute("y"))))return null;const o=k(r);return q.length>0&&o.premultiply(q[q.length-1]),ut.copy(o),q.push(o),o}function k(r){const o=new _t,s=rt;if(r.nodeName==="use"&&(r.hasAttribute("x")||r.hasAttribute("y"))){const e=b(r.getAttribute("x")),f=b(r.getAttribute("y"));o.translate(e,f)}if(r.hasAttribute("transform")){const e=r.getAttribute("transform").split(")");for(let f=e.length-1;f>=0;f--){const y=e[f].trim();if(y==="")continue;const c=y.indexOf("("),x=y.length;if(c>0&&c<x){const w=y.slice(0,c),T=C(y.slice(c+1));switch(s.identity(),w){case"translate":if(T.length>=1){const d=T[0];let m=0;T.length>=2&&(m=T[1]),s.translate(d,m)}break;case"rotate":if(T.length>=1){let d=0,m=0,M=0;d=T[0]*Math.PI/180,T.length>=3&&(m=T[1],M=T[2]),tt.makeTranslation(-m,-M),O.makeRotation(d),g.multiplyMatrices(O,tt),tt.makeTranslation(m,M),s.multiplyMatrices(tt,g)}break;case"scale":if(T.length>=1){const d=T[0];let m=d;T.length>=2&&(m=T[1]),s.scale(d,m)}break;case"skewX":T.length===1&&s.set(1,Math.tan(T[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":T.length===1&&s.set(1,0,0,Math.tan(T[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":T.length===6&&s.set(T[0],T[2],T[4],T[1],T[3],T[5],0,0,1);break}}o.premultiply(s)}}return o}function j(r,o){function s(c){J.set(c.x,c.y,1).applyMatrix3(o),c.set(J.x,J.y)}function e(c){const x=c.xRadius,w=c.yRadius,T=Math.cos(c.aRotation),d=Math.sin(c.aRotation),m=new st(x*T,x*d,0),M=new st(-w*d,w*T,0),P=m.applyMatrix3(o),n=M.applyMatrix3(o),i=rt.set(P.x,n.x,0,P.y,n.y,0,0,0,1),v=tt.copy(i).invert(),dt=O.copy(v).transpose().multiply(v).elements,nt=at(dt[0],dt[1],dt[4]),yt=Math.sqrt(nt.rt1),Rt=Math.sqrt(nt.rt2);if(c.xRadius=1/yt,c.yRadius=1/Rt,c.aRotation=Math.atan2(nt.sn,nt.cs),!((c.aEndAngle-c.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const kt=tt.set(yt,0,0,0,Rt,0,0,0,1),Ft=O.set(nt.cs,nt.sn,0,-nt.sn,nt.cs,0,0,0,1),Lt=kt.multiply(Ft).multiply(i),Xt=Qt=>{const{x:ce,y:ue}=new st(Math.cos(Qt),Math.sin(Qt),0).applyMatrix3(Lt);return Math.atan2(ue,ce)};c.aStartAngle=Xt(c.aStartAngle),c.aEndAngle=Xt(c.aEndAngle),V(o)&&(c.aClockwise=!c.aClockwise)}}function f(c){const x=H(o),w=Y(o);c.xRadius*=x,c.yRadius*=w;const T=x>Number.EPSILON?Math.atan2(o.elements[1],o.elements[0]):Math.atan2(-o.elements[3],o.elements[4]);c.aRotation+=T,V(o)&&(c.aStartAngle*=-1,c.aEndAngle*=-1,c.aClockwise=!c.aClockwise)}const y=r.subPaths;for(let c=0,x=y.length;c<x;c++){const T=y[c].curves;for(let d=0;d<T.length;d++){const m=T[d];m.isLineCurve?(s(m.v1),s(m.v2)):m.isCubicBezierCurve?(s(m.v0),s(m.v1),s(m.v2),s(m.v3)):m.isQuadraticBezierCurve?(s(m.v0),s(m.v1),s(m.v2)):m.isEllipseCurve&&(ot.set(m.aX,m.aY),s(ot),m.aX=ot.x,m.aY=ot.y,U(o)?e(m):f(m))}}}function V(r){const o=r.elements;return o[0]*o[4]-o[1]*o[3]<0}function U(r){const o=r.elements,s=o[0]*o[3]+o[1]*o[4];if(s===0)return!1;const e=H(r),f=Y(r);return Math.abs(s/(e*f))>Number.EPSILON}function H(r){const o=r.elements;return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Y(r){const o=r.elements;return Math.sqrt(o[3]*o[3]+o[4]*o[4])}function at(r,o,s){let e,f,y,c,x;const w=r+s,T=r-s,d=Math.sqrt(T*T+4*o*o);return w>0?(e=.5*(w+d),x=1/e,f=r*x*s-o*x*o):w<0?f=.5*(w-d):(e=.5*d,f=-.5*d),T>0?y=T+d:y=T-d,Math.abs(y)>2*Math.abs(o)?(x=-2*o/y,c=1/Math.sqrt(1+x*x),y=x*c):Math.abs(o)===0?(y=1,c=0):(x=-.5*y/o,y=1/Math.sqrt(1+x*x),c=x*y),T>0&&(x=y,y=-c,c=x),{rt1:e,rt2:f,cs:y,sn:c}}const A=[],Q={},q=[],rt=new _t,tt=new _t,O=new _t,g=new _t,ot=new D,J=new st,ut=new _t,bt=new DOMParser().parseFromString(t,"image/svg+xml");return u(bt.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:A,xml:bt.documentElement}}static createShapes(t){const u={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},h={loc:u.ORIGIN,t:0};function l(S,C,R,F){const b=S.x,E=C.x,k=R.x,j=F.x,V=S.y,U=C.y,H=R.y,Y=F.y,at=(j-k)*(V-H)-(Y-H)*(b-k),A=(E-b)*(V-H)-(U-V)*(b-k),Q=(Y-H)*(E-b)-(j-k)*(U-V),q=at/Q,rt=A/Q;if(Q===0&&at!==0||q<=0||q>=1||rt<0||rt>1)return null;if(at===0&&Q===0){for(let tt=0;tt<2;tt++)if(_(tt===0?R:F,S,C),h.loc==u.ORIGIN){const O=tt===0?R:F;return{x:O.x,y:O.y,t:h.t}}else if(h.loc==u.BETWEEN){const O=+(b+h.t*(E-b)).toPrecision(10),g=+(V+h.t*(U-V)).toPrecision(10);return{x:O,y:g,t:h.t}}return null}else{for(let g=0;g<2;g++)if(_(g===0?R:F,S,C),h.loc==u.ORIGIN){const ot=g===0?R:F;return{x:ot.x,y:ot.y,t:h.t}}const tt=+(b+q*(E-b)).toPrecision(10),O=+(V+q*(U-V)).toPrecision(10);return{x:tt,y:O,t:q}}}function _(S,C,R){const F=R.x-C.x,b=R.y-C.y,E=S.x-C.x,k=S.y-C.y,j=F*k-E*b;if(S.x===C.x&&S.y===C.y){h.loc=u.ORIGIN,h.t=0;return}if(S.x===R.x&&S.y===R.y){h.loc=u.DESTINATION,h.t=1;return}if(j<-Number.EPSILON){h.loc=u.LEFT;return}if(j>Number.EPSILON){h.loc=u.RIGHT;return}if(F*E<0||b*k<0){h.loc=u.BEHIND;return}if(Math.sqrt(F*F+b*b)<Math.sqrt(E*E+k*k)){h.loc=u.BEYOND;return}let V;F!==0?V=E/F:V=k/b,h.loc=u.BETWEEN,h.t=V}function L(S,C){const R=[],F=[];for(let b=1;b<S.length;b++){const E=S[b-1],k=S[b];for(let j=1;j<C.length;j++){const V=C[j-1],U=C[j],H=l(E,k,V,U);H!==null&&R.find(Y=>Y.t<=H.t+Number.EPSILON&&Y.t>=H.t-Number.EPSILON)===void 0&&(R.push(H),F.push(new D(H.x,H.y)))}}return F}function N(S,C,R){const F=new D;C.getCenter(F);const b=[];return R.forEach(E=>{E.boundingBox.containsPoint(F)&&L(S,E.points).forEach(j=>{b.push({identifier:E.identifier,isCW:E.isCW,point:j})})}),b.sort((E,k)=>E.point.x-k.point.x),b}function Z(S,C,R,F,b){(b==null||b==="")&&(b="nonzero");const E=new D;S.boundingBox.getCenter(E);const k=[new D(R,E.y),new D(F,E.y)],j=N(k,S.boundingBox,C);j.sort((A,Q)=>A.point.x-Q.point.x);const V=[],U=[];j.forEach(A=>{A.identifier===S.identifier?V.push(A):U.push(A)});const H=V[0].point.x,Y=[];let at=0;for(;at<U.length&&U[at].point.x<H;)Y.length>0&&Y[Y.length-1]===U[at].identifier?Y.pop():Y.push(U[at].identifier),at++;if(Y.push(S.identifier),b==="evenodd"){const A=Y.length%2===0,Q=Y[Y.length-2];return{identifier:S.identifier,isHole:A,for:Q}}else if(b==="nonzero"){let A=!0,Q=null,q=null;for(let rt=0;rt<Y.length;rt++){const tt=Y[rt];A?(q=C[tt].isCW,A=!1,Q=tt):q!==C[tt].isCW&&(q=C[tt].isCW,A=!0)}return{identifier:S.identifier,isHole:A,for:Q}}else console.warn('fill-rule: "'+b+'" is currently not implemented.')}let $=999999999,I=-999999999,B=t.subPaths.map(S=>{const C=S.getPoints();let R=-999999999,F=999999999,b=-999999999,E=999999999;for(let k=0;k<C.length;k++){const j=C[k];j.y>R&&(R=j.y),j.y<F&&(F=j.y),j.x>b&&(b=j.x),j.x<E&&(E=j.x)}return I<=b&&(I=b+1),$>=E&&($=E-1),{curves:S.curves,points:C,isCW:Me.isClockWise(C),identifier:-1,boundingBox:new Se(new D(E,F),new D(b,R))}});B=B.filter(S=>S.points.length>1);for(let S=0;S<B.length;S++)B[S].identifier=S;const ht=B.map(S=>Z(S,B,$,I,t.userData?t.userData.style.fillRule:void 0)),K=[];return B.forEach(S=>{if(!ht[S.identifier].isHole){const R=new Pe;R.curves=S.curves,ht.filter(b=>b.isHole&&b.for===S.identifier).forEach(b=>{const E=B[b.identifier],k=new Vt;k.curves=E.curves,R.holes.push(k)}),K.push(R)}}),K}static getStrokeStyle(t,a,u,h,l){return t=t!==void 0?t:1,a=a!==void 0?a:"#000",u=u!==void 0?u:"miter",h=h!==void 0?h:"butt",l=l!==void 0?l:4,{strokeColor:a,strokeWidth:t,strokeLineJoin:u,strokeLineCap:h,strokeMiterLimit:l}}static pointsToStroke(t,a,u,h){const l=[],_=[],L=[];if(Zt.pointsToStrokeWithBuffers(t,a,u,h,l,_,L)===0)return null;const N=new oe;return N.setAttribute("position",new vt(l,3)),N.setAttribute("normal",new vt(_,3)),N.setAttribute("uv",new vt(L,2)),N}static pointsToStrokeWithBuffers(t,a,u,h,l,_,L,N){const Z=new D,$=new D,I=new D,B=new D,ht=new D,K=new D,S=new D,C=new D,R=new D,F=new D,b=new D,E=new D,k=new D,j=new D,V=new D,U=new D,H=new D;u=u!==void 0?u:12,h=h!==void 0?h:.001,N=N!==void 0?N:0,t=T(t);const Y=t.length;if(Y<2)return 0;const at=t[0].equals(t[Y-1]);let A,Q=t[0],q;const rt=a.strokeWidth/2,tt=1/(Y-1);let O=0,g,ot,J,ut,bt=!1,Ht=0,r=N*3,o=N*2;s(t[0],t[1],Z).multiplyScalar(rt),C.copy(t[0]).sub(Z),R.copy(t[0]).add(Z),F.copy(C),b.copy(R);for(let d=1;d<Y;d++){A=t[d],d===Y-1?at?q=t[1]:q=void 0:q=t[d+1];const m=Z;if(s(Q,A,m),I.copy(m).multiplyScalar(rt),E.copy(A).sub(I),k.copy(A).add(I),g=O+tt,ot=!1,q!==void 0){s(A,q,$),I.copy($).multiplyScalar(rt),j.copy(A).sub(I),V.copy(A).add(I),J=!0,I.subVectors(q,Q),m.dot(I)<0&&(J=!1),d===1&&(bt=J),I.subVectors(q,A),I.normalize();const M=Math.abs(m.dot(I));if(M>Number.EPSILON){const P=rt/M;I.multiplyScalar(-P),B.subVectors(A,Q),ht.copy(B).setLength(P).add(I),U.copy(ht).negate();const n=ht.length(),i=B.length();B.divideScalar(i),K.subVectors(q,A);const v=K.length();switch(K.divideScalar(v),B.dot(U)<i&&K.dot(U)<v&&(ot=!0),H.copy(ht).add(A),U.add(A),ut=!1,ot?J?(V.copy(U),k.copy(U)):(j.copy(U),E.copy(U)):y(),a.strokeLineJoin){case"bevel":c(J,ot,g);break;case"round":x(J,ot),J?f(A,E,j,g,0):f(A,V,k,g,1);break;case"miter":case"miter-clip":default:const W=rt*a.strokeMiterLimit/n;if(W<1)if(a.strokeLineJoin!=="miter-clip"){c(J,ot,g);break}else x(J,ot),J?(K.subVectors(H,E).multiplyScalar(W).add(E),S.subVectors(H,j).multiplyScalar(W).add(j),e(E,g,0),e(K,g,0),e(A,g,.5),e(A,g,.5),e(K,g,0),e(S,g,0),e(A,g,.5),e(S,g,0),e(j,g,0)):(K.subVectors(H,k).multiplyScalar(W).add(k),S.subVectors(H,V).multiplyScalar(W).add(V),e(k,g,1),e(K,g,1),e(A,g,.5),e(A,g,.5),e(K,g,1),e(S,g,1),e(A,g,.5),e(S,g,1),e(V,g,1));else ot?(J?(e(R,O,1),e(C,O,0),e(H,g,0),e(R,O,1),e(H,g,0),e(U,g,1)):(e(R,O,1),e(C,O,0),e(H,g,1),e(C,O,0),e(U,g,0),e(H,g,1)),J?j.copy(H):V.copy(H)):J?(e(E,g,0),e(H,g,0),e(A,g,.5),e(A,g,.5),e(H,g,0),e(j,g,0)):(e(k,g,1),e(H,g,1),e(A,g,.5),e(A,g,.5),e(H,g,1),e(V,g,1)),ut=!0;break}}else y()}else y();!at&&d===Y-1&&w(t[0],F,b,J,!0,O),O=g,Q=A,C.copy(j),R.copy(V)}if(!at)w(A,E,k,J,!1,g);else if(ot&&l){let d=H,m=U;bt!==J&&(d=U,m=H),J?(ut||bt)&&(m.toArray(l,0*3),m.toArray(l,3*3),ut&&d.toArray(l,1*3)):(ut||!bt)&&(m.toArray(l,1*3),m.toArray(l,3*3),ut&&d.toArray(l,0*3))}return Ht;function s(d,m,M){return M.subVectors(m,d),M.set(-M.y,M.x).normalize()}function e(d,m,M){l&&(l[r]=d.x,l[r+1]=d.y,l[r+2]=0,_&&(_[r]=0,_[r+1]=0,_[r+2]=1),r+=3,L&&(L[o]=m,L[o+1]=M,o+=2)),Ht+=3}function f(d,m,M,P,n){Z.copy(m).sub(d).normalize(),$.copy(M).sub(d).normalize();let i=Math.PI;const v=Z.dot($);Math.abs(v)<1&&(i=Math.abs(Math.acos(v))),i/=u,I.copy(m);for(let W=0,ct=u-1;W<ct;W++)B.copy(I).rotateAround(d,i),e(I,P,n),e(B,P,n),e(d,P,.5),I.copy(B);e(B,P,n),e(M,P,n),e(d,P,.5)}function y(){e(R,O,1),e(C,O,0),e(E,g,0),e(R,O,1),e(E,g,0),e(k,g,1)}function c(d,m,M){m?d?(e(R,O,1),e(C,O,0),e(E,g,0),e(R,O,1),e(E,g,0),e(U,g,1),e(E,M,0),e(j,M,0),e(U,M,.5)):(e(R,O,1),e(C,O,0),e(k,g,1),e(C,O,0),e(U,g,0),e(k,g,1),e(k,M,1),e(U,M,0),e(V,M,1)):d?(e(E,M,0),e(j,M,0),e(A,M,.5)):(e(k,M,1),e(V,M,0),e(A,M,.5))}function x(d,m){m&&(d?(e(R,O,1),e(C,O,0),e(E,g,0),e(R,O,1),e(E,g,0),e(U,g,1),e(E,O,0),e(A,g,.5),e(U,g,1),e(A,g,.5),e(j,O,0),e(U,g,1)):(e(R,O,1),e(C,O,0),e(k,g,1),e(C,O,0),e(U,g,0),e(k,g,1),e(k,O,1),e(U,g,0),e(A,g,.5),e(A,g,.5),e(U,g,0),e(V,O,1)))}function w(d,m,M,P,n,i){switch(a.strokeLineCap){case"round":n?f(d,M,m,i,.5):f(d,m,M,i,.5);break;case"square":if(n)Z.subVectors(m,d),$.set(Z.y,-Z.x),I.addVectors(Z,$).add(d),B.subVectors($,Z).add(d),P?(I.toArray(l,1*3),B.toArray(l,0*3),B.toArray(l,3*3)):(I.toArray(l,1*3),L[3*2+1]===1?B.toArray(l,3*3):I.toArray(l,3*3),B.toArray(l,0*3));else{Z.subVectors(M,d),$.set(Z.y,-Z.x),I.addVectors(Z,$).add(d),B.subVectors($,Z).add(d);const v=l.length;P?(I.toArray(l,v-1*3),B.toArray(l,v-2*3),B.toArray(l,v-4*3)):(B.toArray(l,v-2*3),I.toArray(l,v-1*3),B.toArray(l,v-4*3))}break}}function T(d){let m=!1;for(let P=1,n=d.length-1;P<n;P++)if(d[P].distanceTo(d[P+1])<h){m=!0;break}if(!m)return d;const M=[];M.push(d[0]);for(let P=1,n=d.length-1;P<n;P++)d[P].distanceTo(d[P+1])>=h&&M.push(d[P]);return M.push(d[d.length-1]),M}}}const z={a:3,b:2,c:1,delta:Math.PI/2,A:5,B:5,C:5,tubeRadius:.2,radialSegments:8,color:12844803,pixelSize:10,bloomStrength:1.5,bloomRadius:.4,bloomThreshold:0,exposure:1,backgroundColor:0,grainAmount:.08,grainSpeed:1},mt=new X.Scene,Et=new X.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),gt=new X.WebGLRenderer({antialias:!0});gt.toneMapping=X.ACESFilmicToneMapping;gt.toneMappingExposure=z.exposure;gt.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(gt.domElement);const Qe=`<svg width="100%" height="100%" viewBox="0 0 349 121" xmlns="http://www.w3.org/2000/svg">

<clipPath id="svgTextPath">
<path d="M166.492 0.152327H130.998L128.251 0.840872C125.656 1.55462 123.273 2.88884 121.306 4.7283C119.338 6.56777 117.845 8.85767 116.953 11.4026C111.305 26.7094 105.58 41.4807 99.9318 56.5579C92.2987 77.5283 84.6655 98.4218 76.4218 119.392V120.387H103.901C104.194 120.432 104.493 120.362 104.735 120.191C104.977 120.02 105.143 119.76 105.199 119.469L128.098 58.2415C128.158 57.9564 128.278 57.6874 128.449 57.452C128.62 57.2166 128.839 57.0201 129.092 56.8756C129.344 56.731 129.624 56.6424 129.913 56.614C130.202 56.5856 130.494 56.6185 130.769 56.7111C131.032 56.8184 131.269 56.9786 131.467 57.182C131.665 57.3854 131.819 57.6272 131.919 57.893C132.019 58.1587 132.064 58.4425 132.05 58.7263C132.036 59.0101 131.964 59.2883 131.838 59.5429C129.93 64.6707 128.021 69.7219 126.19 74.8497C122.602 84.3399 119.091 93.83 115.579 103.397C115.554 103.702 115.554 104.01 115.579 104.315L120.236 103.856L156.187 100.106C156.975 99.9435 157.796 100.091 158.478 100.518C159.16 100.946 159.652 101.62 159.851 102.402C161.988 108.295 164.126 114.189 166.187 120.158C166.187 120.847 166.721 121 167.408 121H179.239V17.8322C179.315 14.6554 178.717 11.4982 177.484 8.57089C176.706 6.22359 175.242 4.16509 173.281 2.6636C171.321 1.16212 168.956 0.28735 166.492 0.152327Z" fill="#ffffff"></path>
<path d="M262.058 65.054C261.59 63.6282 260.76 62.3496 259.649 61.3431C258.538 60.3367 257.185 59.6371 255.723 59.3139C253.847 58.9336 251.897 59.2328 250.22 60.1576C248.543 61.0824 247.248 62.5733 246.563 64.3654C246.029 65.6665 245.571 66.9678 245.037 68.3454C244.502 69.723 243.434 70.4115 242.289 69.9523C241.144 69.4931 240.686 68.3449 241.22 66.8907L257.479 23.1901C258.371 20.9895 258.787 18.6234 258.699 16.2495C258.61 13.8755 258.02 11.5478 256.966 9.42009C255.912 7.2924 254.419 5.41422 252.586 3.90892C250.753 2.40362 248.622 1.30535 246.334 0.688545C245.342 0.688545 244.35 0.229602 243.281 0H197.483L194.048 0.688545C190.533 1.61174 187.428 3.68911 185.229 6.58836C183.029 9.48761 181.861 13.0423 181.911 16.6848V120.159H206.337C206.61 120.204 206.889 120.141 207.117 119.984C207.345 119.827 207.503 119.588 207.558 119.316C215.14 98.9073 222.773 78.4982 230.457 58.0891V57.4772C230.542 57.2224 230.678 56.9876 230.857 56.7868C231.035 56.586 231.252 56.4238 231.494 56.3094C231.737 56.1949 232 56.1303 232.268 56.1207C232.536 56.111 232.803 56.1558 233.053 56.2524C233.309 56.3447 233.545 56.4891 233.743 56.6765C233.942 56.864 234.1 57.0904 234.207 57.3417C234.315 57.5931 234.369 57.8642 234.367 58.1377C234.366 58.4112 234.308 58.6818 234.198 58.9318L228.931 72.9372C225.42 82.4275 221.909 91.8408 218.474 101.254C218.308 101.57 218.179 101.904 218.092 102.249L223.282 101.714L239.159 100.031L248.548 98.959C249.489 98.7277 250.483 98.8793 251.313 99.3813C252.143 99.8833 252.74 100.695 252.975 101.638L259.387 119.699C259.387 120.235 259.387 120.465 260.379 120.465H285.11L284.652 119.47L262.058 65.054Z" fill="#ffffff"></path>
<path d="M89.5509 55.7931H70.239C69.9384 55.769 69.6396 55.857 69.4 56.0407C69.1604 56.2244 68.9971 56.4908 68.9415 56.7881L53.0646 100.03C52.454 101.714 51.4617 102.326 50.2404 101.867C49.0191 101.408 48.7139 100.412 49.4009 98.652L64.667 57.4766C65.1846 55.8782 66.2123 54.495 67.5919 53.5406C68.9714 52.5862 70.6261 52.1141 72.3001 52.1962H78.8644C79.7563 52.3003 80.6561 52.0789 81.3989 51.5731C82.1416 51.0672 82.678 50.3098 82.9102 49.4402C86.1924 40.7153 89.4744 31.9144 92.6803 23.1895C93.5893 20.692 93.8927 18.0137 93.5655 15.3754C93.2382 12.7371 92.29 10.2145 90.7986 8.01627C89.3072 5.81806 87.3153 4.0072 84.9881 2.73306C82.6608 1.45891 80.0648 0.757535 77.4141 0.687977C65.3539 0.687977 53.2173 0.687977 41.157 0.687977C37.7379 0.650561 34.391 1.6757 31.5756 3.62154C28.7603 5.56737 26.6145 8.33886 25.4329 11.5562C17.291 32.8326 9.17447 54.1344 1.08341 75.4619C-0.361137 79.0987 -0.361137 83.1521 1.08341 86.7888L9.55601 109.749C10.6775 113.054 12.8231 115.913 15.6791 117.91C18.5352 119.906 21.9525 120.935 25.4329 120.847H70.4683C70.7704 120.894 71.079 120.826 71.3334 120.656C71.5878 120.486 71.7693 120.226 71.8421 119.929C79.0172 100.566 86.1925 81.6611 93.4439 61.9153C94.101 61.3364 94.5298 60.5414 94.6528 59.673C94.7759 58.8047 94.585 57.921 94.1148 57.1814C93.6445 56.4418 92.9261 55.8954 92.0891 55.6408C91.252 55.3862 90.3517 55.4401 89.5509 55.7931Z" fill="#ffffff"></path>
<path d="M323.81 94.2139C321.825 94.2139 320.909 92.9126 321.596 91.0758L339.076 44.0071C341.824 36.3537 344.648 29.3891 347.167 21.9653C347.885 19.7757 348.143 17.461 347.924 15.1667C347.705 12.8724 347.014 10.6487 345.895 8.63531C344.776 6.62194 343.254 4.86286 341.423 3.46889C339.593 2.07491 337.494 1.0765 335.26 0.536262L332.588 0H331.672C331.061 1.91335 330.374 3.75002 329.687 5.58684C322.054 26.4041 314.421 47.1451 306.788 67.9623C306.821 68.1136 306.821 68.2707 306.788 68.422C306.733 68.7063 306.618 68.9748 306.449 69.2096C306.28 69.4443 306.061 69.6398 305.809 69.7813C305.558 69.9229 305.278 70.0069 304.99 70.0289C304.702 70.0509 304.413 70.01 304.143 69.9084C303.872 69.8067 303.627 69.6467 303.425 69.4403C303.222 69.2339 303.067 68.9862 302.97 68.7135C302.873 68.4407 302.837 68.1497 302.863 67.8614C302.89 67.5731 302.979 67.2942 303.124 67.044C304.956 61.9162 306.941 56.7884 308.849 51.7371C315.108 34.7976 321.393 17.9091 327.703 1.07159V0.0766089H279.92C276.889 0.40804 274.015 1.59953 271.635 3.51093C269.256 5.42233 267.469 7.97462 266.485 10.8682C264.806 15.2306 263.203 19.6695 261.524 24.1084C260.302 27.3994 258.852 30.7664 257.86 34.1339C256.756 38.3156 257.133 42.7521 258.929 46.6856C262.974 56.6351 267.172 66.508 271.294 76.3809L287.476 115.108C288.092 116.623 289.151 117.917 290.513 118.818C291.875 119.72 293.478 120.187 295.109 120.159H348.541V93.9841H347.549L323.81 94.2139Z" fill="#ffffff"></path>
</clipPath>
</svg>`,Je=new Zt,$e=Je.parse(Qe),St=new X.Group;$e.paths.forEach(p=>{p.toShapes(!0).forEach(a=>{const u=new X.ShapeGeometry(a),h=new X.MeshPhysicalMaterial({color:p.color,metalness:0,roughness:.8,transmission:.9,thickness:1,ior:1.5,transparent:!0,opacity:.7,envMapIntensity:1,clearcoat:1,clearcoatRoughness:.75}),l=new X.Mesh(u,h);St.add(l)})});const ts=new X.PMREMGenerator(gt);mt.environment=ts.fromScene(new X.Scene).texture;const es=new X.Box3().setFromObject(St),ss=es.getCenter(new X.Vector3);St.position.sub(ss);St.scale.set(.05,-.05,.05);St.position.set(-9,3,0);mt.add(St);const is=new X.AmbientLight(4210752,1);mt.add(is);const le=new X.DirectionalLight(16777215,1);le.position.set(10,10,10);mt.add(le);new De(Et,gt.domElement);mt.background=new X.Color(z.backgroundColor);let ft;function pt(){ft&&(mt.remove(ft),ft.geometry.dispose(),Array.isArray(ft.material)?ft.material.forEach(h=>h.dispose()):ft.material.dispose(),ft=void 0);const p=[];for(let h=0;h<=2*Math.PI;h+=.01){const l=z.A*Math.sin(z.a*h+z.delta),_=z.B*Math.sin(z.b*h),L=z.C*Math.sin(z.c*h);p.push(new X.Vector3(l,_,L))}const t=new X.CatmullRomCurve3(p),a=new X.TubeGeometry(t,400,z.tubeRadius,z.radialSegments,!1),u=new X.MeshPhongMaterial({color:z.color,side:X.DoubleSide});ft=new X.Mesh(a,u),mt.add(ft)}pt();Et.position.z=15;const os={uniforms:{tDiffuse:{value:null},resolution:{value:new X.Vector2},pixelSize:{value:z.pixelSize}},vertexShader:`
							varying vec2 vUv;
							void main() {
									vUv = uv;
									gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
							}
					`,fragmentShader:`
							uniform sampler2D tDiffuse;
							uniform vec2 resolution;
							uniform float pixelSize;

							varying vec2 vUv;

							void main() {
									vec2 dxy = pixelSize / resolution;
									vec2 coord = dxy * floor(vUv / dxy);
									gl_FragColor = texture2D(tDiffuse, coord);
							}
					`},Pt=new qe(gt),ns=new Ze(mt,Et);Pt.addPass(ns);const Ut=new qt(os);Ut.uniforms.resolution.value.set(window.innerWidth,window.innerHeight);Pt.addPass(Ut);const Dt=new Mt(new X.Vector2(window.innerWidth,window.innerHeight),z.bloomStrength,z.bloomRadius,z.bloomThreshold);Pt.addPass(Dt);const as={uniforms:{tDiffuse:{value:null},amount:{value:.08},speed:{value:1},time:{value:0}},vertexShader:`
varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform sampler2D tDiffuse;
uniform float amount;
uniform float speed;
uniform float time;
varying vec2 vUv;

float random(vec2 co) {
	return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

void main() {
	vec4 color = texture2D(tDiffuse, vUv);
	vec2 uvRandom = vUv;
	uvRandom.y *= random(vec2(uvRandom.y, time * speed));
	color.rgb += amount * (random(uvRandom) - 0.5);
	gl_FragColor = color;
}
`};z.grainAmount=.08;z.grainSpeed=1;const zt=new qt(as);Pt.addPass(zt);let ie=0;function he(){requestAnimationFrame(he),ie+=.01,zt.uniforms.time.value=ie,ft.rotation.x+=.005,ft.rotation.y+=.01,Pt.render()}he();const rs=document.querySelector(".bodyreal"),it=new Ee,Bt=it.domElement;Bt.style.zIndex="9999";Bt.style.position="fixed";Bt.style.top="50px";Bt.style.right="0px";rs.appendChild(it.domElement);it.add(z,"a",1,10,1).onChange(pt);it.add(z,"b",1,10,1).onChange(pt);it.add(z,"c",1,10,1).onChange(pt);it.add(z,"A",1,10).onChange(pt);it.add(z,"B",1,10).onChange(pt);it.add(z,"C",1,10).onChange(pt);it.add(z,"tubeRadius",.05,1).step(.01).onChange(pt);it.add(z,"radialSegments",3,20,1).onChange(pt);it.addColor(z,"color").onChange(pt);it.add(z,"pixelSize",1,50).onChange(function(p){Ut.uniforms.pixelSize.value=p}).name("Pixel Size");it.add(z,"bloomStrength",0,3).onChange(function(p){Dt.strength=p}).name("Bloom Strength");it.add(z,"bloomRadius",0,1).onChange(function(p){Dt.radius=p}).name("Bloom Radius");it.add(z,"bloomThreshold",0,1).onChange(function(p){Dt.threshold=p}).name("Bloom Threshold");it.add(z,"exposure",.1,2).onChange(function(p){gt.toneMappingExposure=p}).name("Exposure");it.addColor(z,"backgroundColor").onChange(function(p){mt.background.set(p)}).name("BG Color");it.add(z,"grainAmount",0,.5).onChange(function(p){zt.uniforms.amount.value=p}).name("Grain Amount");it.add(z,"grainSpeed",0,5).onChange(function(p){zt.uniforms.speed.value=p}).name("Grain Speed");window.addEventListener("resize",()=>{gt.setSize(window.innerWidth,window.innerHeight),Et.aspect=window.innerWidth/window.innerHeight,Et.updateProjectionMatrix(),Ut.uniforms.resolution.value.set(window.innerWidth,window.innerHeight),Dt.setSize(window.innerWidth,window.innerHeight),Pt.setSize(window.innerWidth,window.innerHeight)});window.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded")},!1);
